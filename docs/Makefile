#
# sphinx-ext-linkrewrite/docs/Makefile ---
#

SHELL:=bash
.SUFFIXES:

_default: _docs_all

#####

sphinx_autogen:=${SEL_VE_DIR}/bin/sphinx-autogen
sphinx_build:=${SEL_VE_DIR}/bin/sphinx-build

# didnt include in default VE as we dont always build the docs.
_docs_pip_install:
	pip install sphinx # recommonmark

_docs_sphinx-ext-linkrewrite-util_help:
	sphinx-ext-linkrewrite-util --help > \
	  ./source/sphinx-ext-linkrewrite-util-help.txt
#	dos2unix ./source/sphinx-ext-linkrewrite-util-help.txt

_docs_autogen:
	cd ${SOURCEDIR} && sphinx-autogen index.rst


#_docs_all+=_docs_pip_install
_docs_all+=_docs_autogen
_docs_all+=html 

_docs_all: ${_docs_all}

#####
#
# The autogenerated makefile.
#

# You can set these variables from the command line.
SPHINXOPTS    =
SPHINXBUILD   = ${sphinx_build}
SPHINXPROJ    = sphinx-ext-linkrewrite
SOURCEDIR     = ./source
BUILDDIR      = ./build

# Put it first so that "make" without argument is like "make help".
help:
	@$(SPHINXBUILD) -M help "$(SOURCEDIR)" "$(BUILDDIR)" $(SPHINXOPTS) $(O)

.PHONY: help Makefile

# Catch-all target: route all unknown targets to Sphinx using the new
# "make mode" option.  $(O) is meant as a shortcut for $(SPHINXOPTS).
#%: Makefile
html:
	@$(SPHINXBUILD) -M $@ "$(SOURCEDIR)" "$(BUILDDIR)" $(SPHINXOPTS) $(O)
